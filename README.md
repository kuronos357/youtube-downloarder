# YouTube Downloader

YouTubeの動画やプレイリストをダウンロード、管理するための高機能ツールです。GUIによる詳細な設定、クラウドサービスとの連携、ファイル形式の変換など、多彩な機能を搭載しています。

## 主な機能

*   **動画・プレイリストのダウンロード**: YouTubeのURLをクリップボードにコピーするか、コマンドライン引数で渡すだけでダウンロードを開始できます。
*   **豊富な出力フォーマット**: MP4, WebMなどの動画形式や、MP3, WAV, FLACなどの音声形式に対応しています。
*   **GUIによる簡単設定 (`DLctrl.py`)**: 専用のGUIツールで、以下の項目を直感的に設定できます。
    *   ダウンロード先ディレクトリとデフォルトのファイル形式
    *   保存先（ローカルまたはGoogle Drive）
    *   `ffmpeg`のパス
    *   動画の品質
    *   Cookieの利用設定（プライベート動画やメンバー限定動画のダウンロード用）
    *   NotionやGoogle Driveとの連携設定
*   **クラウド連携**:
    *   **Google Drive**: ダウンロードしたファイルを直接Google Driveの指定フォルダにアップロードします。
    *   **Notion**: ダウンロード履歴（ファイル名, URL, 成否など）を指定したNotionデータベースに自動で記録します。
*   **並列ダウンロード**: プレイリストをダウンロードする際は、複数の動画を並列で処理し、時間を短縮します。
*   **認証対応**: ブラウザのCookieを利用して、ログインが必要なプライベート動画やメンバー限定コンテンツをダウンロードできます。
*   **詳細なログ機能**: 成功・失敗の履歴をローカルのJSONファイル（`設定・履歴/log.json`）に記録します。
*   **スタンドアロンのファイルコンバータ (`webmのmp3変換.py`)**: ローカルにあるメディアファイルを、指定した別のフォーマットに変換するユーティリティツールも同梱しています。

## 動作要件

*   Python 3.x
*   **ffmpeg**: 動画・音声の変換に必須です。システムにインストールし、PATHを通しておく必要があります。
*   必要なPythonライブラリ（`requirements.txt`参照）:
    *   `yt-dlp`
    *   `requests`
    *   `pyperclip`
    *   `google-api-python-client`
    *   `google-auth-oauthlib`

## インストールとセットアップ

1.  **リポジトリのクローン**:

    ```bash
    git clone <repository-url>
    cd youtube-downloarder
    ```

2.  **Python依存ライブラリのインストール**:

    ```bash
    pip install -r requirements.txt
    ```

3.  **ffmpegのインストール**:
    [ffmpeg公式サイト](https://ffmpeg.org/download.html) からダウンロードし、インストールしてください。インストール後、コマンドプロンプトやターミナルで `ffmpeg` コマンドが実行できるように、実行ファイルのパスを環境変数 `PATH` に追加してください。
    *GUI設定画面 (`DLctrl.py`) でffmpegの実行ファイルパスを直接指定することも可能です。*

4.  **初期設定**:
    最初に設定用GUIを起動して、基本的な設定を行います。

    ```bash
    python DLctrl.py
    ```

    少なくとも、ダウンロードしたファイルの保存先ディレクトリを設定してください。Google DriveやNotionと連携する場合は、この画面で認証情報やAPIキーなどを設定します。

## 使用方法

### 1. 動画をダウンロードする

1.  ダウンロードしたいYouTube動画またはプレイリストのURLをクリップボードにコピーします。
2.  ターミナルで以下のコマンドを実行します。

    ```bash
    python YoutubeDLer.py
    ```

3.  クリップボードのURLが自動で読み込まれ、設定に基づいてダウンロードが開始されます。

    *URLをコマンドライン引数として渡すことも可能です。*
    ```bash
    python YoutubeDLer.py <youtube_url>
    ```

### 2. ローカルファイルを変換する

既存のメディアファイルを別の形式に変換したい場合は、コンバータツールを起動します。

```bash
python webmのmp3変換.py
```

GUIの指示に従い、変換したいファイル、出力フォーマット、保存先を選択してください。

## 設定ファイル

*   すべての設定は `設定・履歴/config.json` に保存されます。GUI (`DLctrl.py`) を使って編集することが推奨されます。
*   Google Driveの認証トークンは `設定・履歴/token.json` に保存されます。
*   エラーログや成功履歴は `設定・履歴/log.json` に記録されます。
